(function(t){function e(e){for(var i,s,l=e[0],o=e[1],c=e[2],f=0,p=[];f<l.length;f++)s=l[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,l=1;l<n.length;l++){var o=n[l];0!==a[o]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/sale-cycle/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;r.push([1,"chunk-vendors"]),n()})({0:function(t,e){},"0abf":function(t,e,n){},1:function(t,e,n){t.exports=n("56d7")},2:function(t,e){},3:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-flex",staticStyle:{padding:"1rem","margin-top":"0.5rem",height:"100vh",width:"100vw"},attrs:{id:"app"}},[n("div",[n("div",{staticClass:"control",staticStyle:{width:"240px","max-width":"240px",overflow:"hidden"}},[n("label",{staticClass:"label"},[t._v("区间长度参数")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.params.sectionLength,expression:"params.sectionLength"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.params.sectionLength},on:{input:function(e){e.target.composing||t.$set(t.params,"sectionLength",e.target.value)}}})]),n("div",{staticStyle:{height:"0.75rem"}}),n("div",{staticClass:"file is-boxed"},[n("label",{staticClass:"file-label"},[n("input",{staticClass:"file-input",attrs:{type:"file",multiple:""},on:{input:t.handleFilesInput}}),t._m(0)])]),n("div",{staticStyle:{height:"0.75rem"}}),n("FileList",{attrs:{files:t.files,currentFile:t.currentFile},on:{"click-file":function(e){t.currentFile=e}}})],1),n("div",{staticStyle:{"min-width":"3rem"}}),n("FileChart",{attrs:{params:t.params,file:t.currentFile}})],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"file-cta"},[n("span",{staticClass:"file-icon"},[n("i",{staticClass:"iconfont icon-upload-page"})]),n("span",{staticClass:"file-label"},[t._v("上传文件")])])}],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.files.length?n("nav",{staticClass:"panel",staticStyle:{"max-width":"240px"}},[n("p",{staticClass:"panel-heading is-size-6"},[t._v(" 文件列表 ")]),t._l(t.files,(function(e,i){return n("a",{key:i,staticClass:"panel-block is-active",class:e===t.currentFile&&"has-border-right-info",on:{click:function(n){return t.handleClick(e)}}},[n("span",{staticStyle:{"margin-right":"0.25rem"}},[t._v(t._s(e.name))])])}))],2):t._e()},l=[],o={name:"FileList",props:{files:{},currentFile:{}},methods:{handleClick:function(t){this.$emit("click-file",t)}}},c=o,u=n("2877"),f=Object(u["a"])(c,s,l,!1,null,null,null),p=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.file?n("div",{staticClass:"is-flex-auto"},[n("div",{staticStyle:{width:"100%",height:"512px"},attrs:{id:"chart"}}),n("div",{staticStyle:{height:"1rem"}}),n("table",{staticClass:"table is-centered is-nowrap is-fullwidth"},[t._m(0),n("tbody",t._l(t.sections,(function(e,i){var a=e.times,r=e.months,s=e.years,l=e.monthLength;return n("tr",{key:i},[n("td",[t._v(t._s(i+1))]),n("td",[t._v(t._s(a[1]))]),n("td",[t._v(t._s(a[0]))]),n("td",[t._v(t._s(a[1]-a[0]))]),n("td",[t._v(t._s(s[0]+" 年 "+r[0]+" 月"))]),n("td",[t._v(t._s(s[1]+" 年 "+r[1]+" 月"))]),n("td",[t._v(t._s(l+" 个月"))])])})),0)])]):t._e()},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",{staticStyle:{width:"1px"}},[t._v("#")]),n("th",[t._v("最高峰")]),n("th",[t._v("最低谷")]),n("th",{staticStyle:{width:"1px"}},[t._v("差值（最高峰 - 最低谷）")]),n("th",[t._v("起始日期")]),n("th",[t._v("结束日期")]),n("th",[t._v("持续月数")])])}],m=(n("99af"),n("4de4"),n("d81d"),n("fb6a"),n("b0c0"),n("a9e3"),n("25eb"),n("1276"),n("1146")),v=n.n(m),y=n("313e"),_=n.n(y),g={name:"Chart",props:{file:{},params:{}},data:function(){return{sections:[]}},watch:{file:{immediate:!0,handler:function(t){var e=this;if(t){var n=new FileReader;n.readAsBinaryString(t),n.onloadend=function(){var i=n.result,a=v.a.read(i,{type:"binary"}),r=a.Sheets[a.SheetNames[0]];if(r){var s=t.name,l={header:1,raw:!1},o=v.a.utils.sheet_to_json(r,l),c=b(o),u=S(c,s),f=C(c).filter((function(t){return t.times[1]-t.times[0]>e.params.sectionLength}));e.sections=f,F(u),e.isShowResult=!0}}}}}}};function b(t){return t=t.slice(3),t=t.map(w),t.reduce(x,[])}function w(t){var e=t[0],n=Number.parseInt(t[1]);e=e.split("/");var i=e[2],a=e[0];return{year:i,month:a,times:n}}function x(t,e){var n=e.year,i=e.month,a=e.times,r=t[t.length-1];return r&&r.month===i&&r.year===n?r.times+=a:t.push({year:n,month:i,times:a}),t}function C(t){return t.reduce((function(t,e){var n=e.year,i=e.month,a=e.times,r=t[t.length-1],s=r?r.times[1]-r.times[0]:null;return!r||s<0&&a>r.times[1]||s>0&&a<r.times[1]?t.push({years:[r?r.years[1]:n,n],months:[r?r.months[1]:i,i],times:[r?r.times[1]:a,a],monthLength:r?1:0}):(r.years[1]=n,r.months[1]=i,r.times[1]=a,r.monthLength++),t}),[])}function S(t,e){return{title:{text:"商品名: ".concat(e)},tooltip:{trigger:"axis"},xAxis:{data:t.map((function(t){return"".concat(t.year,"年").concat(t.month,"月")}))},yAxis:{splitLine:{show:!1}},toolbox:{left:"center",feature:{}},dataZoom:[{},{type:"inside"}],visualMap:{top:10,right:10,outOfRange:{color:"#999"}},series:{name:"times",type:"line",data:t.map((function(t){return t.times}))}}}function F(t){var e=_.a.init(document.getElementById("chart"));e.setOption(t)}var O=g,j=Object(u["a"])(O,h,d,!1,null,null,null),L=j.exports,k={name:"app",components:{FileList:p,FileChart:L},data:function(){return{files:[],currentFile:null,params:{sectionLength:100}}},methods:{handleFilesInput:function(t){this.files=t.target.files,this.files.length&&(this.currentFile=this.files[0])}}},P=k,$=(n("c335"),Object(u["a"])(P,a,r,!1,null,null,null)),E=$.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(E)}}).$mount("#app")},c335:function(t,e,n){"use strict";var i=n("0abf"),a=n.n(i);a.a}});
//# sourceMappingURL=app.7bb75d40.js.map